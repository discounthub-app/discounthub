# ‚öôÔ∏è –≠—Ç–∞–ø 1: –±–∏–ª–¥ —á–µ—Ä–µ–∑ Vite
FROM node:20 AS build

WORKDIR /app
COPY package*.json ./
RUN npm install --include=dev
COPY . .
RUN npm run build

# üöÄ –≠—Ç–∞–ø 2: –ø—Ä–æ–¥–∞–∫—à–Ω —á–µ—Ä–µ–∑ nginx
FROM nginx:alpine AS prod

RUN rm -rf /etc/nginx/conf.d/default.conf
COPY --from=build /app/dist /usr/share/nginx/html

# üß™ –≠—Ç–∞–ø 3: dev-—Å–µ—Ä–≤–µ—Ä Vite (–±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ override)
FROM node:20 AS dev

WORKDIR /app
COPY package*.json ./
RUN npm install --include=dev
COPY . .

CMD ["npm", "run", "dev"]
